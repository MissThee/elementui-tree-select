(function(e){function t(t){for(var n,r,s=t[0],o=t[1],c=t[2],u=0,f=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);d&&d(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),l()}function l(){for(var e,t=0;t<a.length;t++){for(var l=a[t],n=!0,s=1;s<l.length;s++){var o=l[s];0!==i[o]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=l[0]))}return e}var n={},i={app:0},a=[];function r(t){if(n[t])return n[t].exports;var l=n[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=e,r.c=n,r.d=function(e,t,l){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(l,n,function(t){return e[t]}.bind(null,n));return l},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=o;a.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"0e27":function(e,t,l){"use strict";var n=l("bd6e"),i=l.n(n);i.a},"56d7":function(e,t,l){"use strict";l.r(t);l("e260"),l("e6cf"),l("cca6"),l("a79d");var n=l("2b0e"),i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"app"}},[l("div",{staticClass:"panel"},[l("div",{staticClass:"back-board",staticStyle:{padding:"0"}},[l("div",{staticClass:"title",staticStyle:{padding:"10px","border-bottom":"1px solid #ccc"}},[e._v("组件绑定的数据:")]),l("el-scrollbar",{staticStyle:{flex:"1",overflow:"hidden"}},[l("pre",{staticStyle:{"font-family":"Arial,serif"}},[e._v(e._s(e.treeData))])])],1),l("div",{staticClass:"back-board"},[l("div",{staticClass:"title"},[e._v("单选:(可选所有节点)")]),l("tree-select",{attrs:{data:e.treeData,clearable:"",filterable:"",props:{id:"id",name:"name",children:"children"}},model:{value:e.selectValueSingle,callback:function(t){e.selectValueSingle=t},expression:"selectValueSingle"}}),l("div",{staticStyle:{color:"#999"}},[l("span",[e._v("已选id：")]),l("span",{staticStyle:{color:"#666"}},[e._v(e._s(e.selectValueSingle))])]),l("div",[l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.selectValueSingle=111}}},[e._v("选中'三级1-1-1'")]),l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.selectValueSingle=1}}},[e._v("选中'一级1'")])],1),l("div",{staticStyle:{"border-bottom":"1px solid #ccc",margin:"60px 0 10px"}}),l("div",{staticClass:"title"},[e._v("单选:(仅选叶子节点，leafOnly)")]),l("tree-select",{attrs:{data:e.treeData,clearable:"",filterable:"","leaf-only":""},model:{value:e.selectValueSingleLeafOnly,callback:function(t){e.selectValueSingleLeafOnly=t},expression:"selectValueSingleLeafOnly"}}),l("div",{staticStyle:{color:"#999"}},[l("span",[e._v("已选id：")]),l("span",{staticStyle:{color:"#666"}},[e._v(e._s(e.selectValueSingleLeafOnly))])]),l("div",[l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.selectValueSingleLeafOnly=111}}},[e._v("选中'三级1-1-1'")]),l("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.selectValueSingleLeafOnly=1}}},[e._v("选中'一级1'")])],1)],1),l("div",{staticClass:"back-board"},[l("div",{staticClass:"title"},[e._v("多选:（仅选叶子节点，强制leafOnly）")]),l("tree-select",{attrs:{data:e.treeData,clearable:"",filterable:"",multiple:""},model:{value:e.selectValueMulti,callback:function(t){e.selectValueMulti=t},expression:"selectValueMulti"}}),l("div",{staticStyle:{color:"#999",margin:"10px 0 0 0"}},[l("span",[e._v("已选id：")]),l("span",{staticStyle:{color:"#666"}},[e._v(e._s(e.selectValueMulti))])]),l("div",[l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.selectValueMulti=[111,112,113]}}},[e._v("选中'三级1-1-1', '三级1-1-2', '三级1-1-3'")])],1),l("div",[l("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.selectValueMulti=[1,2]}}},[e._v("选中'一级1', '一级2'")])],1)],1)]),e._m(0)])},a=[function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"link"},[l("a",{attrs:{href:"https://github.com/MissThee/elementui-tree-select"}},[e._v("查看源码：https://github.com/MissThee/elementui-tree-select")])])}],r=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-select",e._b({ref:"selectRef",attrs:{"filter-method":e.selectFilterMethod},on:{"visible-change":e.selectVisibleChangeHandler,focus:e.focusHandler,change:e.selectChangeHandler},model:{value:e.selectedIds,callback:function(t){e.selectedIds=t},expression:"selectedIds"}},"el-select",e.$attrs,!1),[l("el-option",{staticClass:"tree-option",attrs:{disabled:"",value:null}},[l("el-tree",e._b({ref:"treeRef",staticClass:"tree",attrs:{data:e.treeData,"node-key":e.treeOptions&&e.treeOptions.nodeKey||e.commonProps.id,props:{id:e.commonProps.id,label:e.commonProps.name,children:e.commonProps.children},filterNodeMethod:e.filterNodeMethod,"show-checkbox":e.multiple,"default-expand-all":"","highlight-current":!e.multiple,"expand-on-click-node":e.multiple||e.leafOnly},on:{"node-expand":e.nodeExpandHandler,"node-collapse":e.nodeCollapseHandler,"node-click":e.treeClickHandler,check:e.treeCheckHandler}},"el-tree",e.treeOptions,!1))],1),e._l(e.plainData.filter((function(t){return e.multiple?t.isLeaf:!e.leafOnly||t.isLeaf})),(function(t){return l("el-option",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:t[e.commonProps.id],attrs:{value:t[e.commonProps.id],label:t[e.commonProps.name]}})}))],2)},s=[],o=(l("4de4"),l("7db0"),l("4160"),l("caad"),l("b0c0"),l("a9e3"),l("b64b"),l("2532"),l("159b"),l("2909")),c=l("ade3"),d={name:"treeSelect",props:{value:{type:[Array,String,Number]},data:{type:Array,default:function(){return[]}},leafOnly:Boolean,treeOptions:{type:Object,default:function(){return{}}}},data:function(){return{treeData:[],plainData:[],selectedIds:[],lastHighlightNodeId:void 0,panelScrollTop:0}},watch:{data:{handler:function(){this.treeData=this.data,this.plainData=this.getPlainTreeData(this.data),this.panelScrollTop=0},deep:!0,immediate:!0},value:{handler:function(){var e,t=this;this.multiple?(this.selectedIds=JSON.parse(JSON.stringify(this.value)),this.$nextTick((function(){t.$refs.treeRef.setCheckedKeys(t.value.filter((function(e){var l;return null===(l=t.plainData.find((function(t){return t.id===e})))||void 0===l?void 0:l.isLeaf})))}))):(this.selectedIds=this.value,this.leafOnly&&!(null===(e=this.plainData.find((function(e){return e[t.commonProps.id]===t.value})))||void 0===e?void 0:e.isLeaf)?(this.lastHighlightNodeId=void 0,this.$nextTick((function(){t.$refs.treeRef.setCurrentKey(void 0)}))):(this.lastHighlightNodeId=this.value||void 0,this.$nextTick((function(){t.$refs.treeRef.setCurrentKey(t.value||void 0)}))))},deep:!0,immediate:!0}},computed:{commonProps:function(){var e,t,l,n,i,a;return{id:(null===(e=this.$attrs)||void 0===e||null===(t=e.props)||void 0===t?void 0:t.id)||"id",name:(null===(l=this.$attrs)||void 0===l||null===(n=l.props)||void 0===n?void 0:n.name)||"name",children:(null===(i=this.$attrs)||void 0===i||null===(a=i.props)||void 0===a?void 0:a.children)||"children"}},multiple:function(){return Object.keys(this.$attrs).includes("multiple")&&!1!==this.$attrs.multiple}},methods:{getPlainTreeData:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach((function(e){var n,i,a=(n={},Object(c["a"])(n,t.commonProps.id,e[t.commonProps.id]),Object(c["a"])(n,t.commonProps.name,e[t.commonProps.name]),n);l.push(a),(null===(i=e[t.commonProps.children])||void 0===i?void 0:i.length)?t.getPlainTreeData(e[t.commonProps.children],l):a.isLeaf=!0})),l},treeClickHandler:function(e,t){if(!this.multiple){if(this.leafOnly&&!t.isLeaf)return void this.$refs.treeRef.setCurrentKey(this.lastHighlightNodeId);this.lastHighlightNodeId=e.id,this.selectedIds=e[this.commonProps.id],this.$refs.selectRef.handleClose(),this.$emit("input",this.selectedIds)}},treeCheckHandler:function(){this.multiple&&(this.selectedIds=this.$refs.treeRef.getCheckedKeys(!0),this.$emit("input",Object(o["a"])(this.selectedIds)))},selectChangeHandler:function(e){this.multiple?this.$refs.treeRef.setCheckedKeys(e):(this.lastHighlightNodeId=e||void 0,this.$refs.treeRef.setCurrentKey(e||void 0)),this.$emit("input",e)},nodeCollapseHandler:function(){var e=this;setTimeout((function(){e.$refs.selectRef.broadcast("ElSelectDropdown","updatePopper")}),10)},nodeExpandHandler:function(){var e=this;setTimeout((function(){e.$refs.selectRef.broadcast("ElSelectDropdown","updatePopper")}),10)},selectFilterMethod:function(e){this.$refs.treeRef.filter(e)},filterNodeMethod:function(e,t){return!e||String(t.name).toLowerCase().includes(String(e).toLowerCase())},selectVisibleChangeHandler:function(e){var t=this;e||(this.panelScrollTop=this.$refs.selectRef.$refs.scrollbar.$el.children[0].scrollTop),setTimeout((function(){t.$refs.treeRef.filter()}),100)},focusHandler:function(){var e=this;setTimeout((function(){e.$refs.selectRef.$refs.scrollbar.$el.children[0].scrollTo({top:e.panelScrollTop||0})}))}}},u=d,f=(l("0e27"),l("2877")),p=Object(f["a"])(u,r,s,!1,null,"797a5128",null),h=p.exports,m={name:"App",components:{TreeSelect:h},data:function(){return{selectValueMulti:[],selectValueSingle:null,selectValueSingleLeafOnly:null,treeData:[{id:1,name:"一级 1",children:[{id:11,name:"二级 1-1",children:[{id:111,name:"三级 1-1-1"},{id:112,name:"三级 1-1-2"},{id:113,name:"三级 1-1-3"},{id:114,name:"三级 1-1-4"},{id:115,name:"三级 1-1-5"}]}]},{id:2,name:"一级 2",children:[{id:21,name:"二级 2-1"},{id:22,name:"二级 2-2"}]},{id:3,name:"一级 3",children:[{id:31,name:"二级 3-1 比较长的选项，比较长的选项，比较长的选项"},{id:32,name:"二级 3-2"},{id:33,name:"二级 3-3"}]},{id:4,name:"一级 4",children:[{id:41,name:"二级 4-1"},{id:42,name:"二级 4-2"},{id:43,name:"二级 4-3"}]},{id:5,name:"A",children:[{id:51,name:"B",children:[{id:511,name:"C"}]}]}]}}},v=m,b=(l("8325"),Object(f["a"])(v,i,a,!1,null,"42b411d9",null)),y=b.exports,g=l("5c96"),S=l.n(g);l("0fae");n["default"].use(S.a),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(y)}}).$mount("#app")},8325:function(e,t,l){"use strict";var n=l("eea7"),i=l.n(n);i.a},bd6e:function(e,t,l){},eea7:function(e,t,l){}});